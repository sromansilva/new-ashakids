<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/adminLayout :: Head}"></head>

<body>
  <!-- Navbar para pantallas peque√±as -->
  <nav th:replace="~{fragments/adminLayout :: navSmallAdmin}"></nav>

  <div class="d-flex" style="min-height: 100vh;">
    <!-- Sidebar -->
    <div th:replace="~{fragments/adminLayout :: sidebarAdmin}"></div>

    <div class="sidebar-backdrop" onclick="toggleSidebar()"></div>

    <!-- Contenido principal -->
    <div class="flex-grow-1 p-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Gesti√≥n de Terapias <span class="text-primary fw-bold" th:text="${admin.nombre}">Administrador</span> üß†</h2>
        <small class="text-muted">Vista actualizada de terapias</small>
      </div>

      <!-- Estad√≠sticas de terapias -->
      <div class="row mb-4">
        <div class="col-md-3 mb-3">
          <div class="card border-start border-primary border-4 shadow-sm">
            <div class="card-body d-flex align-items-center">
              <i class="fas fa-child fa-2x text-primary me-3"></i>
              <div>
                <h6 class="mb-0">Ni√±os en Terapia</h6>
                <p class="text-muted mb-0" th:text="${ninosEnTerapia}">89</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card border-start border-success border-4 shadow-sm">
            <div class="card-body d-flex align-items-center">
              <i class="fas fa-comments fa-2x text-success me-3"></i>
              <div>
                <h6 class="mb-0">Comentarios Recibidos</h6>
                <p class="text-muted mb-0" th:text="${comentariosRecibidos}">156</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card border-start border-warning border-4 shadow-sm">
            <div class="card-body d-flex align-items-center">
              <i class="fas fa-clock fa-2x text-warning me-3"></i>
              <div>
                <h6 class="mb-0">Sesiones Pendientes</h6>
                <p class="text-muted mb-0" th:text="${sesionesPendientes}">23</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card border-start border-info border-4 shadow-sm">
            <div class="card-body d-flex align-items-center">
              <i class="fas fa-star fa-2x text-info me-3"></i>
              <div>
                <h6 class="mb-0">Satisfacci√≥n Promedio</h6>
                <p class="text-muted mb-0" th:text="${satisfaccionPromedio}">4.6</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filtros -->
      <div class="row mb-4">
        <div class="col-md-3">
          <input type="text" class="form-control" id="buscarNino" placeholder="Buscar ni√±o...">
        </div>
        <div class="col-md-2">
          <select class="form-select" id="filtroEdad">
            <option value="">Todas las edades</option>
            <option value="3-5">3-5 a√±os</option>
            <option value="6-8">6-8 a√±os</option>
            <option value="9-11">9-11 a√±os</option>
            <option value="12-14">12-14 a√±os</option>
          </select>
        </div>
        <div class="col-md-2">
          <select class="form-select" id="filtroTerapeuta">
            <option value="">Todos los terapeutas</option>
            <option value="1">Dr. Garc√≠a</option>
            <option value="2">Dra. L√≥pez</option>
            <option value="3">Dr. Mart√≠nez</option>
          </select>
        </div>
        <div class="col-md-2">
          <select class="form-select" id="filtroEstado">
            <option value="">Todos los estados</option>
            <option value="activo">Activo</option>
            <option value="completado">Completado</option>
            <option value="pausado">Pausado</option>
          </select>
        </div>
        <div class="col-md-3">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="soloConComentarios">
            <label class="form-check-label" for="soloConComentarios">
              Solo con comentarios
            </label>
          </div>
        </div>
      </div>

      <!-- Lista de ni√±os en terapia -->
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="mb-0">Ni√±os en Terapia</h6>
        </div>
        <div class="card-body">
          <div class="row">
            <!-- Ni√±o 1 -->
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <img src="/img/pacientes/avatar1.jpg" class="rounded-circle me-3" width="60" height="60" alt="Foto">
                    <div>
                      <h5 class="mb-1">Mateo Fern√°ndez</h5>
                      <p class="text-muted mb-0">6 a√±os ‚Ä¢ ID: 001</p>
                    </div>
                    <span class="badge bg-success ms-auto">Activo</span>
                  </div>
                  
                  <div class="row mb-3">
                    <div class="col-6">
                      <small class="text-muted">Terapeuta</small>
                      <p class="mb-0"><strong>Dra. Susana Horia</strong></p>
                    </div>
                    <div class="col-6">
                      <small class="text-muted">Sesiones</small>
                      <p class="mb-0"><strong>12 completadas</strong></p>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <small class="text-muted">Progreso General</small>
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
                    </div>
                  </div>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="badge bg-info">Tiene comentarios</span>
                    <button class="btn btn-sm btn-outline-primary" onclick="verDetallesCompletos(1)">
                      <i class="fas fa-eye me-1"></i>Ver detalles
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ni√±o 2 -->
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <img src="/img/pacientes/avatar2.jpg" class="rounded-circle me-3" width="60" height="60" alt="Foto">
                    <div>
                      <h5 class="mb-1">Ana Garc√≠a</h5>
                      <p class="text-muted mb-0">8 a√±os ‚Ä¢ ID: 002</p>
                    </div>
                    <span class="badge bg-success ms-auto">Activo</span>
                  </div>
                  
                  <div class="row mb-3">
                    <div class="col-6">
                      <small class="text-muted">Terapeuta</small>
                      <p class="mb-0"><strong>Dr. Carlos L√≥pez</strong></p>
                    </div>
                    <div class="col-6">
                      <small class="text-muted">Sesiones</small>
                      <p class="mb-0"><strong>8 completadas</strong></p>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <small class="text-muted">Progreso General</small>
                    <div class="progress">
                      <div class="progress-bar bg-success" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">60%</div>
                    </div>
                  </div>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="badge bg-secondary">Sin comentarios</span>
                    <button class="btn btn-sm btn-outline-primary" onclick="verDetallesCompletos(2)">
                      <i class="fas fa-eye me-1"></i>Ver detalles
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ni√±o 3 -->
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <img src="/img/pacientes/avatar3.jpg" class="rounded-circle me-3" width="60" height="60" alt="Foto">
                    <div>
                      <h5 class="mb-1">Carlos Rodr√≠guez</h5>
                      <p class="text-muted mb-0">7 a√±os ‚Ä¢ ID: 003</p>
                    </div>
                    <span class="badge bg-primary ms-auto">Completado</span>
                  </div>
                  
                  <div class="row mb-3">
                    <div class="col-6">
                      <small class="text-muted">Terapeuta</small>
                      <p class="mb-0"><strong>Dra. Mar√≠a P√©rez</strong></p>
                    </div>
                    <div class="col-6">
                      <small class="text-muted">Sesiones</small>
                      <p class="mb-0"><strong>20 completadas</strong></p>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <small class="text-muted">Progreso General</small>
                    <div class="progress">
                      <div class="progress-bar bg-primary" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">100%</div>
                    </div>
                  </div>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="badge bg-info">Tiene comentarios</span>
                    <button class="btn btn-sm btn-outline-primary" onclick="verDetallesCompletos(3)">
                      <i class="fas fa-eye me-1"></i>Ver detalles
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ni√±o 4 -->
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <img src="/img/pacientes/avatar4.jpg" class="rounded-circle me-3" width="60" height="60" alt="Foto">
                    <div>
                      <h5 class="mb-1">Luc√≠a Mart√≠nez</h5>
                      <p class="text-muted mb-0">5 a√±os ‚Ä¢ ID: 004</p>
                    </div>
                    <span class="badge bg-warning ms-auto">Pausado</span>
                  </div>
                  
                  <div class="row mb-3">
                    <div class="col-6">
                      <small class="text-muted">Terapeuta</small>
                      <p class="mb-0"><strong>Dr. Juan Silva</strong></p>
                    </div>
                    <div class="col-6">
                      <small class="text-muted">Sesiones</small>
                      <p class="mb-0"><strong>5 completadas</strong></p>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <small class="text-muted">Progreso General</small>
                    <div class="progress">
                      <div class="progress-bar bg-warning" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                    </div>
                  </div>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="badge bg-secondary">Sin comentarios</span>
                    <button class="btn btn-sm btn-outline-primary" onclick="verDetallesCompletos(4)">
                      <i class="fas fa-eye me-1"></i>Ver detalles
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Ver Detalles Completos -->
  <div class="modal fade" id="verDetallesCompletosModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Informaci√≥n Completa del Ni√±o</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-4 text-center">
              <img id="detalleCompletoFoto" src="/img/pacientes/avatar1.jpg" class="rounded-circle mb-3" width="150" height="150" alt="Foto">
              <h4 id="detalleCompletoNombre">Mateo Fern√°ndez</h4>
              <p class="text-muted" id="detalleCompletoEdad">6 a√±os ‚Ä¢ ID: 001</p>
              <span id="detalleCompletoEstado" class="badge bg-success fs-6">Activo</span>
            </div>
            <div class="col-md-8">
              <div class="row">
                <div class="col-md-6">
                  <h6 class="border-bottom pb-2">Informaci√≥n Personal</h6>
                  <p><strong>Fecha de Nacimiento:</strong> <span id="detalleCompletoFechaNac">15/06/2018</span></p>
                  <p><strong>Padre/Madre:</strong> <span id="detalleCompletoPadre">Javier Fern√°ndez</span></p>
                  <p><strong>Tel√©fono:</strong> <span id="detalleCompletoTelefono">666666666</span></p>
                  <p><strong>Direcci√≥n:</strong> <span id="detalleCompletoDireccion">Av. Falsa 123, Lima</span></p>
                </div>
                <div class="col-md-6">
                  <h6 class="border-bottom pb-2">Informaci√≥n de Terapia</h6>
                  <p><strong>Terapeuta:</strong> <span id="detalleCompletoTerapeuta">Dra. Susana Horia</span></p>
                  <p><strong>Especialidad:</strong> <span id="detalleCompletoEspecialidad">Terapia Infantil</span></p>
                  <p><strong>Sesiones Completadas:</strong> <span id="detalleCompletoSesiones">12</span></p>
                  <p><strong>Fecha de Inicio:</strong> <span id="detalleCompletoFechaInicio">01/10/2023</span></p>
                </div>
              </div>
              
              <div class="row mt-4">
                <div class="col-12">
                  <h6 class="border-bottom pb-2">Progreso Detallado</h6>
                  <div class="row">
                    <div class="col-md-3">
                      <div class="text-center">
                        <h4 class="text-primary">75%</h4>
                        <small class="text-muted">Progreso General</small>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="text-center">
                        <h4 class="text-success">85%</h4>
                        <small class="text-muted">Memoria</small>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="text-center">
                        <h4 class="text-warning">70%</h4>
                        <small class="text-muted">Lenguaje</small>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="text-center">
                        <h4 class="text-info">80%</h4>
                        <small class="text-muted">Coordinaci√≥n</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="row mt-4">
                <div class="col-12">
                  <h6 class="border-bottom pb-2">√öltimas Sesiones</h6>
                  <div class="timeline">
                    <div class="timeline-item">
                      <div class="timeline-marker bg-success"></div>
                      <div class="timeline-content">
                        <h6 class="mb-1">Sesi√≥n #12 - 15/01/2024</h6>
                        <p class="mb-1">Ejercicios de memoria y concentraci√≥n. Excelente progreso.</p>
                        <small class="text-muted">Duraci√≥n: 45 min ‚Ä¢ Evaluaci√≥n: 9/10</small>
                      </div>
                    </div>
                    
                    <div class="timeline-item">
                      <div class="timeline-marker bg-primary"></div>
                      <div class="timeline-content">
                        <h6 class="mb-1">Sesi√≥n #11 - 08/01/2024</h6>
                        <p class="mb-1">Juegos de lenguaje y pronunciaci√≥n. Buen trabajo.</p>
                        <small class="text-muted">Duraci√≥n: 40 min ‚Ä¢ Evaluaci√≥n: 8/10</small>
                      </div>
                    </div>
                    
                    <div class="timeline-item">
                      <div class="timeline-marker bg-warning"></div>
                      <div class="timeline-content">
                        <h6 class="mb-1">Sesi√≥n #10 - 01/01/2024</h6>
                        <p class="mb-1">Ejercicios de coordinaci√≥n motora. Progreso constante.</p>
                        <small class="text-muted">Duraci√≥n: 50 min ‚Ä¢ Evaluaci√≥n: 8/10</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Ver Comentarios -->
  <div class="modal fade" id="verComentariosModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Comentarios del Ni√±o</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <h6>Mateo Fern√°ndez - Comentarios</h6>
            <p class="text-muted">√öltima actualizaci√≥n: 15/01/2024</p>
          </div>
          
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-marker bg-success"></div>
              <div class="timeline-content">
                <h6 class="mb-1">Sesi√≥n #12 - 15/01/2024</h6>
                <p class="mb-1">"Me gust√≥ mucho el juego de palabras. Pude recordar m√°s palabras que antes."</p>
                <small class="text-muted">Comentario del ni√±o</small>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-marker bg-primary"></div>
              <div class="timeline-content">
                <h6 class="mb-1">Sesi√≥n #11 - 08/01/2024</h6>
                <p class="mb-1">"Hoy fue dif√≠cil concentrarme, pero al final pude completar el ejercicio."</p>
                <small class="text-muted">Comentario del ni√±o</small>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-marker bg-warning"></div>
              <div class="timeline-content">
                <h6 class="mb-1">Sesi√≥n #10 - 01/01/2024</h6>
                <p class="mb-1">"El juego de memoria fue muy divertido. Quiero jugar m√°s juegos as√≠."</p>
                <small class="text-muted">Comentario del ni√±o</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('show');
      document.querySelector('.sidebar-backdrop').classList.toggle('show');
    }

    function verDetallesCompletos(id) {
      // Aqu√≠ cargar√≠as los datos del ni√±o en el modal
      console.log('Ver detalles completos:', id);
      // Mostrar el modal
      var modal = new bootstrap.Modal(document.getElementById('verDetallesCompletosModal'));
      modal.show();
    }

    function verComentarios(id) {
      // Aqu√≠ cargar√≠as los comentarios del ni√±o en el modal
      console.log('Ver comentarios:', id);
    }

    function editarTerapia(id) {
      // Aqu√≠ cargar√≠as los datos de la terapia en el modal de edici√≥n
      console.log('Editar terapia:', id);
    }

    // Filtros
    document.getElementById('buscarNino').addEventListener('input', function() {
      // Implementar b√∫squeda
    });

    document.getElementById('filtroEdad').addEventListener('change', function() {
      // Implementar filtro por edad
    });

    document.getElementById('filtroTerapeuta').addEventListener('change', function() {
      // Implementar filtro por terapeuta
    });

    document.getElementById('filtroEstado').addEventListener('change', function() {
      // Implementar filtro por estado
    });

    document.getElementById('soloConComentarios').addEventListener('change', function() {
      // Implementar filtro por comentarios
    });
  </script>

  <style>
    .timeline {
      position: relative;
      padding-left: 30px;
    }
    
    .timeline-item {
      position: relative;
      margin-bottom: 20px;
    }
    
    .timeline-marker {
      position: absolute;
      left: -35px;
      top: 5px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    
    .timeline-content {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 3px solid #dee2e6;
    }
  </style>
</body>
</html> 